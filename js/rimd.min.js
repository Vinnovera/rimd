!function(e,t){"use strict";function n(n){function o(){for(var e,t=/\{([\s\S]+?)\}/g,n="";null!==(e=t.exec(R.path));)n+="|\\{"+e[1]+"\\}";return new RegExp(n.substr(1),"g")}function u(e){for(var t=d(e),n=e.length,r=0;n>r;r++)t[r].offsetWidth?(T.push(i(e[r],t[r],R.lazyload,R.centerImage)),H.push(e[r]),O.push(t[r])):W.push(e[r])}function l(e){var t,n,i=e.src.split("?");return e.path=i[0],n=R.path.replace(b,function(t,n,i){return c(e,t,n,i)}),i.length>1&&(t=i[1],n+=E?"&"+t:"?"+t),e.path=n,n}function c(e,t){var n;switch(t){case"{width}":return n=m(R.widths,e.offsetWidth)*(R.dubbleSizeRetina&&s?2:1),e.width=n,n;case"{height}":return f(e);case"{retina}":return s?1:0;case"{quality}":return s?40:80;default:return n=t.substr(1,t.length-2),n in e?e[n]:""}}function f(e){var t;return"Object"==typeof R.heights?t=m(R.heights,e.offsetHeight):"aspectratio"===R.heights&&(t=~~(e.offsetHeight/e.offsetWidth*m(R.widths,e.offsetWidth))),t*=R.dubbleSizeRetina&&s?2:1,e.height=t,t}function d(e){for(var t,n,i=[],r=e.length,a=0,s={};r>a;a++)if(i[a]={},i[a].offsetWidth=e[a].offsetWidth,i[a].offsetHeight=e[a].offsetHeight,t=e[a].getElementsByTagName("noscript")[0],t&&(s=t.dataset?t.dataset:h(t),"src"in s)){for(n in s)i[a][n]=s[n];i[a].path=l(i[a])}return i}function h(e){var t,n,i,r={},a=0;if("undefined"==typeof e||!("attributes"in e))return r;for(t=e.attributes,n=t.length;n>a;a++)/^data-/.test(t[a].name)&&(i=t[a].name.substr(5).replace(/-(.)/g),r[i]=t[a].value);return r}function p(e){var n=[];return e=e.replace(/[.]/,""),n=t.querySelectorAll?t.querySelectorAll("."+e):g(e)}function g(e){var n,i=[],r=t.getElementsByTagName("*");for(n in r)(" "+r[n].className+" ").indexOf(" "+e+" ")>-1&&i.push(r[n]);return i}function v(){var e=W;W=[],u(e)}function m(e,t){var n,i,r,a,s=0;if(!e)return t;for(n=e.length,a=e[n-1];n>s;s++){if(r=e[s]-t,R.closestAbove){if(0>r)continue}else r=0>r?~r:r;(void 0===i||i>r)&&(i=r,a=e[s])}return a}function y(){var t=0,n=T.length;for(R.reloadOnResize&&e.removeEventListener("resize",w);n>t;t++)T[t].destruct();T=null,H=null,O=null}var E,b,L,w,z,R={},N={nodeList:[],className:"rimd",widths:["320","600","1024"],heights:["320","600","1024"],path:"resimage/?image={path}&w={width}",reloadOnResize:!1,lazyload:!1,closestAbove:!1,centerImage:!1,dubbleSizeRetina:!1},T=[],H=[],O=[],W=[];return R=r(N,n),E=R.path.split("?").length>1,b=o(),L=R.nodeList.length?R.nodeList:p(R.className),u(L),L=null,R.reloadOnResize&&(w=a(function(){for(var e=d(H),t=0,n=H.length;n>t;t++)"src"in e&&O[t].path!==l(e[t])&&T[t].updateImage(e[t]);O=e}),e.addEventListener("resize",w)),z={destruct:y,options:R,update:w,addImages:u,updateQueue:v}}function i(n,i,r,s){function o(i){i.path&&(f&&f.parentNode&&f.parentNode.removeChild(f),f=t.createElement("img"),f.src=i.path,i.alt&&(f.alt=i.alt),i.title&&(f.title=i.title),i["class"]&&(f.className=i["class"]),s&&(i.width&&(f.style.left="50%",f.style.marginLeft=-i.width/2+"px"),i.height&&(f.style.top="50%",f.style.marginTop=-i.height/2+"px")),!r||u(n)?n.appendChild(f):(l(),e.addEventListener("scroll",d),e.addEventListener("resize",h)))}function u(n){var i=n.dataset&&n.dataset.top?n.dataset.top:n.getBoundingClientRect().top,r=t.documentElement,a=i<=(e.pageYOffset||r.scrollTop)-(r.clientTop||0)+(e.innerHeight||r.clientHeight);return a||!n.dataset||n.dataset.top||(n.dataset.top=i),a}function l(){e.removeEventListener("scroll",d),e.removeEventListener("resize",h)}function c(){l(),f&&f.parentNode&&f.parentNode.removeChild(f),f=null}var f,d=a(function(){u(n)&&(n.appendChild(f),l())}),h=a(function(){"undefined"!=typeof n.dataset&&(n.dataset.top=n.getBoundingClientRect().top),d()});return o(i),{removeListeners:l,updateImage:o,destruct:c}}function r(e,t){for(var n in t)t.hasOwnProperty(n)&&"undefined"!=typeof t[n]&&(e[n]=t[n]);return e}function a(e,t,n){var i,r;return t=t||17,function(){var a=new Date,s=arguments;n=n||this,i&&i+t>a?(clearTimeout(r),r=setTimeout(function(){i=a,e.apply(n,s)},t)):(i=a,e.apply(n,s))}}var s=e.devicePixelRatio>1;e.addEventListener||!function(e,t,n,i,r,a,s){e[i]=t[i]=n[i]=function(e,t){var n=this;s.unshift([n,e,t,function(e){e.currentTarget=n,e.preventDefault=function(){e.returnValue=!1},e.stopPropagation=function(){e.cancelBubble=!0},e.target=e.srcElement||n,t.call(n,e)}]),this.attachEvent("on"+e,s[0][3])},e[r]=t[r]=n[r]=function(e,t){var n,i=0;for(i;n==s[i];++i)if(n[0]==this&&n[1]==e&&n[2]==t)return this.detachEvent("on"+e,s.splice(i,1)[0][3])},e[a]=t[a]=n[a]=function(e){return this.fireEvent("on"+e.type,e)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]),e.Rimd=n}(this,this.document);