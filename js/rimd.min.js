!function(t,e){"use strict";function n(n){function s(){for(var t,e=/\{([\s\S]+?)\}/g,n="";null!==(t=e.exec(R.path));)n+="|\\{"+t[1]+"\\}";return new RegExp(n.substr(1),"g")}function u(t){for(var e=d(t),n=t.length,i=0;n>i;i++)e[i].offsetWidth?(T.push(r(t[i],e[i],R.lazyload,R.centerImage)),H.push(t[i]),O.push(e[i])):W.push(t[i])}function l(t){var e,n,r=t.src.split("?");return t.path=r[0],n=R.path.replace(b,function(e,n,r){return c(t,e,n,r)}),r.length>1&&(e=r[1],n+=E?"&"+e:"?"+e),t.path=n,n}function c(t,e){var n;switch(e){case"{width}":return n=m(R.widths,t.offsetWidth)*(R.dubbleSizeRetina&&o?2:1),t.width=n,n;case"{height}":return f(t);case"{retina}":return o?1:0;case"{quality}":return o?40:80;default:return n=e.substr(1,e.length-2),n in t?t[n]:""}}function f(t){var e;return"Object"==typeof R.heights?e=m(R.heights,t.offsetHeight):"aspectratio"===R.heights&&(e=~~(t.offsetHeight/t.offsetWidth*m(R.widths,t.offsetWidth))),e*=R.dubbleSizeRetina&&o?2:1,t.height=e,e}function d(t){for(var e,n,r=[],i=t.length,a=0,o={};i>a;a++){r[a]={},r[a].offsetWidth=t[a].offsetWidth,r[a].offsetHeight=t[a].offsetHeight,e=t[a].getElementsByTagName("noscript")[0],o=e.dataset?e.dataset:h(e);for(n in o)r[a][n]=o[n];r[a].path=l(r[a])}return r}function h(t){var e,n,r,i={},a=0;if("undefined"==typeof t||!("attributes"in t))return i;for(e=t.attributes,n=e.length;n>a;a++)/^data-/.test(e[a].name)&&(r=e[a].name.substr(5).replace(/-(.)/g),i[r]=e[a].value);return i}function p(t){var n=[];return t=t.replace(/[.]/,""),n=e.querySelectorAll?e.querySelectorAll("."+t):g(t)}function g(t){var n,r=[],i=e.getElementsByTagName("*");for(n in i)(" "+i[n].className+" ").indexOf(" "+t+" ")>-1&&r.push(i[n]);return r}function v(){var t=W;W=[],u(t)}function m(t,e){var n,r,i,a,o=0;if(!t)return e;for(n=t.length,a=t[n-1];n>o;o++){if(i=t[o]-e,R.closestAbove){if(0>i)continue}else i=0>i?~i:i;(void 0===r||r>i)&&(r=i,a=t[o])}return a}function y(){var e=0,n=T.length;for(R.reloadOnResize&&t.removeEventListener("resize",w);n>e;e++)T[e].destruct();T=null,H=null,O=null}var E,b,L,w,z,R={},N={nodeList:[],className:"rimd",widths:["320","600","1024"],heights:["320","600","1024"],path:"resimage/?image={path}&w={width}",reloadOnResize:!1,lazyload:!1,closestAbove:!1,centerImage:!1,dubbleSizeRetina:!1},T=[],H=[],O=[],W=[];return R=i(N,n),E=R.path.split("?").length>1,b=s(),L=R.nodeList.length?R.nodeList:p(R.className),u(L),L=null,R.reloadOnResize&&(w=a(function(){for(var t=d(H),e=0,n=H.length;n>e;e++)O[e].path!==l(t[e])&&T[e].updateImage(t[e]);O=t}),t.addEventListener("resize",w)),z={destruct:y,options:R,update:w,addImages:u,updateQueue:v}}function r(n,r,i,o){function s(r){r.path&&(f&&f.parentNode&&f.parentNode.removeChild(f),f=e.createElement("img"),f.src=r.path,r.alt&&(f.alt=r.alt),r.title&&(f.title=r.title),r["class"]&&(f.className=r["class"]),o&&(r.width&&(f.style.left="50%",f.style.marginLeft=-r.width/2+"px"),r.height&&(f.style.top="50%",f.style.marginTop=-r.height/2+"px")),!i||u(n)?n.appendChild(f):(l(),t.addEventListener("scroll",d),t.addEventListener("resize",h)))}function u(n){var r=n.dataset&&n.dataset.top?n.dataset.top:n.getBoundingClientRect().top,i=e.documentElement,a=r<=(t.pageYOffset||i.scrollTop)-(i.clientTop||0)+(t.innerHeight||i.clientHeight);return a||!n.dataset||n.dataset.top||(n.dataset.top=r),a}function l(){t.removeEventListener("scroll",d),t.removeEventListener("resize",h)}function c(){l(),f&&f.parentNode&&f.parentNode.removeChild(f),f=null}var f,d=a(function(){u(n)&&(n.appendChild(f),l())}),h=a(function(){"undefined"!=typeof n.dataset&&(n.dataset.top=n.getBoundingClientRect().top),d()});return s(r),{removeListeners:l,updateImage:s,destruct:c}}function i(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function a(t,e,n){var r,i;return e=e||17,function(){var a=new Date,o=arguments;n=n||this,r&&r+e>a?(clearTimeout(i),i=setTimeout(function(){r=a,t.apply(n,o)},e)):(r=a,t.apply(n,o))}}var o=t.devicePixelRatio>1;t.addEventListener||!function(t,e,n,r,i,a,o){t[r]=e[r]=n[r]=function(t,e){var n=this;o.unshift([n,t,e,function(t){t.currentTarget=n,t.preventDefault=function(){t.returnValue=!1},t.stopPropagation=function(){t.cancelBubble=!0},t.target=t.srcElement||n,e.call(n,t)}]),this.attachEvent("on"+t,o[0][3])},t[i]=e[i]=n[i]=function(t,e){var n,r=0;for(r;n==o[r];++r)if(n[0]==this&&n[1]==t&&n[2]==e)return this.detachEvent("on"+t,o.splice(r,1)[0][3])},t[a]=e[a]=n[a]=function(t){return this.fireEvent("on"+t.type,t)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]),t.Rimd=n}(this,this.document);