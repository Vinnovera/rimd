!function(t,e){"use strict";function n(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function i(t,e,n){var i,r;return e=e||17,function(){var a=new Date,o=arguments;n=n||this,i&&i+e>a?(clearTimeout(r),r=setTimeout(function(){i=a,t.apply(n,o)},e)):(i=a,t.apply(n,o))}}var r,a;!t.addEventListener&&function(t,e,n,i,r,a,o){t[i]=e[i]=n[i]=function(t,e){var n=this;o.unshift([n,t,e,function(t){t.currentTarget=n,t.preventDefault=function(){t.returnValue=!1},t.stopPropagation=function(){t.cancelBubble=!0},t.target=t.srcElement||n,e.call(n,t)}]),this.attachEvent("on"+t,o[0][3])},t[r]=e[r]=n[r]=function(t,e){var n,i=0;for(i;n==o[i];++i)if(n[0]==this&&n[1]==t&&n[2]==e)return this.detachEvent("on"+t,o.splice(i,1)[0][3])},t[a]=e[a]=n[a]=function(t){return this.fireEvent("on"+t.type,t)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]),a=function(n,r,a,o){function s(i){i.path&&(h&&h.parentNode&&h.parentNode.removeChild(h),h=e.createElement("img"),h.src=i.path,i.alt&&(h.alt=i.alt),i.title&&(h.title=i.title),o&&(i.width&&(h.style.left="50%",h.style.marginLeft=-i.width/2+"px"),i.height&&(h.style.top="50%",h.style.marginTop=-i.height/2+"px")),!a||l(n)?n.appendChild(h):(u(),t.addEventListener("scroll",d),t.addEventListener("resize",p)))}function l(n){var i=n.dataset&&n.dataset.top?n.dataset.top:n.getBoundingClientRect().top,r=e.documentElement,a=i<=(t.pageYOffset||r.scrollTop)-(r.clientTop||0)+(t.innerHeight||r.clientHeight);return a||!n.dataset||n.dataset.top||(n.dataset.top=i),a}function u(){t.removeEventListener("scroll",d),t.removeEventListener("resize",p)}function c(){u(),h&&h.parentNode&&h.parentNode.removeChild(h),h=null}var h,d=i(function(){l(n)&&(n.appendChild(h),u())}),p=i(function(){"undefined"!=typeof n.dataset&&(n.dataset.top=n.getBoundingClientRect().top),d()});return s(r),{removeListeners:u,updateImage:s,destruct:c}},r=function(r){function o(t){for(var e=u(t),n=t.length,i=0;n>i;i++)L.push(a(t[i],e[i],y.lazyload,y.centerImage)),w.push(t[i]),z.push(e[i])}function s(t){var e,n=t.src.split("?"),i=n[1];return t.path=n[0],e=y.path.replace(/\{width\}|\{path\}|\{retina\}|\{height\}/g,function(e,n,i){return l(t,e,n,i)}),i&&(e+=y.pathHasGet?"&"+i:"?"+i),t.path=e,e}function l(e,n){var i;switch(n){case"{path}":return e.path;case"{width}":return i=p(y.widths,e.offsetWidth)*(t.devicePixelRatio>1?2:1),e.width=i,i;case"{height}":return i=p(y.heights,e.offsetHeight)*(t.devicePixelRatio>1?2:1),e.height=i,i;case"{retina}":return t.devicePixelRatio>1?1:0}}function u(t){for(var e,n,i=[],r=t.length,a=0,o={};r>a;a++){i[a]={},i[a].offsetWidth=t[a].offsetWidth,i[a].offsetHeight=t[a].offsetHeight,e=t[a].getElementsByTagName("noscript")[0],o=e.dataset?e.dataset:c(e);for(n in o)i[a][n]=o[n];i[a].path=s(i[a])}return i}function c(t){var e,n,i,r={},a=0;if("undefined"==typeof t||!("attributes"in t))return r;for(e=t.attributes,n=e.length;n>a;a++)/^data-/.test(e[a].name)&&(i=e[a].name.substr(5).replace(/-(.)/g),r[i]=e[a].value);return r}function h(t){var n=[];return t=t.replace(/[.]/,""),n=e.querySelectorAll?e.querySelectorAll("."+t):d(t)}function d(t){var n,i=[],r=e.getElementsByTagName("*");for(n in r)(" "+r[n].className+" ").indexOf(" "+t+" ")>-1&&i.push(r[n]);return i}function p(t,e){var n,i,r,a,o=0;if(!t)return e;for(n=t.length,a=t[n-1];n>o;o++){if(r=t[o]-e,y.closestAbove){if(0>r)continue}else r=0>r?~r:r;(void 0===i||i>r)&&(i=r,a=t[o])}return a}function f(){var e=0,n=L.length;for(y.reloadOnResize&&t.removeEventListener("resize",v);n>e;e++)L[e].destruct();L=null,w=null,z=null}var g,v,m,y={},E={nodeList:[],className:"rimd_img",widths:["320","600","1024"],heights:["320","600","1024"],path:"resimagecrop.php?image={path}&w={width}&h={height}&r={retina}",reloadOnResize:!1,lazyload:!1,closestAbove:!1,centerImage:!1},L=[],w=[],z=[];return y=n(E,r),y.pathHasGet=y.path.split("?").length>1,g=y.nodeList.length?y.nodeList:h(y.className),o(g),g=null,y.reloadOnResize&&(v=i(function(){for(var t=u(w),e=0,n=w.length;n>e;e++)z[e].path!==s(t[e])&&L[e].updateImage(t[e]);z=t}),t.addEventListener("resize",v)),m={getClosestValues:p,getImageAttributes:u,legacyGetElementByClass:d,extend:n},{destruct:f,options:y,update:v,addImages:o,t:m}},t.Rimd=r}(this,this.document);